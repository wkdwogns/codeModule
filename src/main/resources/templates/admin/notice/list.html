<html lang="ko" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="/admin/layout/layout">
<div class="content" layout:fragment="contents">

    <div id="list">
        <table class="table writeTable">
            <caption>
                공지사항 등록 리스트
                <div class="searchBox floatRight">
                    <input type="hidden" name="page" id="devIdHdnPage" value="1">
                    <select id="sKeyField" name="sKeyField" style="margin-right: 5px">
                        <option value="">선택</option>
                        <option value="Title">제목</option>
                        <option value="Content">내용</option>
                    </select>
                    <label>
                        <input id="sKeyword" name="sKeyword" type="text" maxlength="100" value="" placeholder="" style="margin-right: 10px">
                        <button type="button" class="btn blackBtn devCssBtnSearch" onclick="list(1)">검색</button>
                        </label>
                    </div>
                <div class="searchBox">
                    <span style="font-size:10pt;"></span>
                </div>
            </caption>
            <colgroup>
                <col style="width: 80px;"/>
                <!--<col style="width: 80px;"/>-->
                <col style="width: 200px;"/>
                <!--<col />-->
                <col style="width: 200px;"/>
                <col style="width: 70px;"/>
                <col style="width: 70px;"/>
            </colgroup>
            <thead>
            <tr>
                <th>번호</th>
                <!--<th>중요</th>-->
                <!--<th>공지</th>-->
                <th>제목</th>
                <th>노출일자</th>
                <th>첨부파일</th>
                <th>노출여부</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="btnList clearfix">
        <div id="paging" class="paging"></div>
        <button type="button" class="btn mainBtn floatRight devCssBtnAdd">공지사항 등록</button>
    </div>
    <script>
        $('.devCssBtnAdd').click(function () {
            location.href='/page/admin/notice/add';
        });

        $(document).on('keyup','#sKeyword',function (e) {
            e.preventDefault();
            if(e.keyCode==13){
                list(1);
                return ;
            }
        });

        function list(no){
            $('.main').addClass('list');

            var colsInfo = [
                {no: 1, col: 'no', name: '번호'}
                /*,{no: 2, col: 'importantYn', name: '중요',custom:function(obj){
                    var impo = (obj.importantYn=='Y')?'v':'';
                    return impo;
                }}*/
                /*,{no: 3, col: 'noticeType', name: '공지',custom:function(obj){
                    var noticeType = (obj.noticeType == '003002')?'v':'';
                    return noticeType;
                }}*/
                , {no: 4, col: 'title', name: '제목', width:"400px;",custom:function(obj){
                    var title = obj.title;

                    return '<a href="/page/admin/notice/add?info='+obj.noticeSeq+'" class="ell">'+title+'</a>';
                }}
                , {no: 5, col: 'viewStDt', name: '노출일자', width:"400px;"}
                , {no: 6, col: 'attach', name: '첨부파일',custom:function(obj){
                    var a = obj.fileGrpSeq;

                    if(a!=null&&a!=''){
                        a='Y';
                    }else{a='';}

                    return a;
                }}
                , {no: 7, col: 'viewYn', name: '노출여부'}
            ];

            var params = {
                cntPerPage: 10
                ,currentPage:no
                ,cate1 : $('#devIdSelSCate1').val()
                ,keyField : $('#sKeyField').val()
                ,keyWord : $('#sKeyword').val()
            };

            tms.ajaxGetHelper('/mapi/notice', params, null, function(result) {

                var paging = {
                    id: '#paging',
                    pageNo: no,
                    totalCnt: 0,
                    countPerPage: 10,
                    fn: 'list',
                    activeClass: 'link on',
                    type: 'type1'
                };

                var info = {
                    colsInfo: colsInfo,
                    paging: paging
                };

                if(result.code == "0") {
                    var totalCnt = result.data.totalCnt;
                    paging.totalCnt = totalCnt;

                    if(totalCnt == 0){
                        tableType1("#list", null, info );
                    } else {
                        tableType1("#list", result.data.list, info);
                    }
                } else {
                    tableType1("#list", null, info );
                }

                $('.searchBox span').text('총 '+ totalCnt +'건의 데이터가 검색되었습니다');

            }, function(a,s,d){

            });
        }

        list(1);
    </script>

</div>
</html>